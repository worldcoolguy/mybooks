!function(){"use strict";function o(o){o.when("/new-book/:id",{templateUrl:"views/new-book.html",controller:"NewBookController",controllerAs:"NewBookCtrl"}).when("/new-book",{templateUrl:"views/new-book.html",controller:"NewBookController",controllerAs:"NewBookCtrl"})}function e(o,e,t,n,r,i){function l(o){console.log(o),d.book=o}var d=this;d.editMode=!1,d.buttonTitle="Save",d.book={coverUrl:r.defaultBookCover},null!=e.id&&(d.editMode=!0,d.buttonTitle="Update",n.getBookById(e.id).then(l)),d.save=function(){function e(e){if(200==e){var n="Book saved!";d.editMode&&(n="Book updated"),t.success(n,"Hooray!!!"),o.path("/")}else t.error("Error Code: "+e)}var r={coverUrl:d.book.coverUrl,description:d.book.description,id:d.book.id||i.generate(),isbn:d.book.isbn,title:d.book.title,readed:d.book.readed};console.log("Readed: "+r.readed),d.editMode?n.updateBook(r).then(e):n.postBook(r).then(e)},d.searchBookByIsbn=function(){function o(o){if(null==o)return void t.info("Book not found");d.book.coverUrl=o.thumbnail,d.book.title=o.title,d.book.description=o.description}""==d.book.isbn||d.editMode||n.searchBookByIsbn(d.book.isbn).then(o)}}angular.module("myBooksApp.books").config(["$routeProvider",o]).controller("NewBookController",e),e.$inject=["$location","$routeParams","toastr","booksService","config","uuid4"]}();